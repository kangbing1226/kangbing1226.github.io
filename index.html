<!DOCTYPE html>
<html lang="en-US">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>drsinBlog</title>
  <meta name="description" content="我不生产代码，只是github的搬用工   
">

  <meta name="description" content="我不生产代码，只是github的搬用工   
"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/css/style.css?v=6215a2849678db39332432a733632219d4f4a945">
  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="canonical" href="http://ninowon.com/">
  <link rel="alternate" type="application/rss+xml" title="drsinBlog" href="http://ninowon.com/feed.xml">

    <script>
    // 百度统计代码
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?9509c46947d444c42bdfd33deeaff852";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


</head>

  <body>
  <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">drsinBlog</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
          <a class="page-link" href="/category/">Category</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>

    <section class="page-header">
      <h1 class="project-name">drsinBlog</h1>
      <h2 class="project-tagline">我不生产代码，只是github的搬用工   
</h2>
      
        <a href="http://github.com/drsin/drsin.github.io" class="btn">View on GitHub</a>
      
      
        <a href="http://github.com/drsin/drsin.github.io/zipball/gh-pages" class="btn">Download .zip</a>
        <a href="http://github.com/drsin/drsin.github.io/tarball/gh-pages" class="btn">Download .tar.gz</a>
      
    </section>

    <section class="main-content">
   <div class="home">

  <h1 class="page-heading">好记性不如烂笔头</h1>
<!--
  <ul class="post-list">
    
      <li>
        <span class="post-meta">Jun 16, 2017</span>

        <h2>
          <a class="post-link" href="/liunx/2017/06/16/linux-shell.html">linux</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Jun 16, 2017</span>

        <h2>
          <a class="post-link" href="/c%E8%AF%AD%E8%A8%80/2017/06/16/C%E8%AF%AD%E8%A8%80%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8.html">C语言系统调用</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Jun 16, 2017</span>

        <h2>
          <a class="post-link" href="/c%E8%AF%AD%E8%A8%80/2017/06/16/C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html">C语言数据类型</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Jun 16, 2017</span>

        <h2>
          <a class="post-link" href="/c%E8%AF%AD%E8%A8%80/2017/06/16/C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0.html">C语言基础练习</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Jun 8, 2017</span>

        <h2>
          <a class="post-link" href="/%E6%94%AF%E4%BB%98%E4%B8%9A%E5%8A%A1/2017/06/08/%E9%93%B6%E8%81%94%E5%89%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F.html">银联前置系统</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">May 22, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2017/05/22/Hibernate-FAQ.html">Hibernate FAQ</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">May 1, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%B7%A5%E5%85%B7/2017/05/01/create-blog-site.html">crete blog page</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Apr 1, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%89%8D%E7%AB%AF/2017/04/01/Bootstrap-table%E5%AE%9E%E7%8E%B0%E9%A1%B5%E9%9D%A2%E6%8C%89%E5%88%97%E6%90%9C%E7%B4%A2.html">Bootstrap-table实现按列搜索</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Mar 27, 2017</span>

        <h2>
          <a class="post-link" href="/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E6%BA%90%E6%8A%80%E6%9C%AF/2017/03/27/Jekyll%E6%B7%BB%E5%8A%A0FancyBox%E6%8F%92%E4%BB%B6%E9%A2%84%E8%A7%88%E5%9B%BE%E7%89%87.html">Jekyll 添加 FancyBox 图片插件</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Mar 26, 2017</span>

        <h2>
          <a class="post-link" href="/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E6%BA%90%E6%8A%80%E6%9C%AF/2017/03/26/Gecco-java-%E7%88%AC%E8%99%AB.html">使用Gecco爬取博客（一）</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Mar 21, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2017/03/21/Spring-Boot-%E7%83%AD%E9%83%A8%E7%BD%B2.html">Spring-Boot 实现热部署</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Mar 6, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2017/03/06/Java-Socket%E7%BC%96%E7%A8%8B.html">Java Socket编程</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Mar 6, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2017/03/06/Executor%E7%BA%BF%E7%A8%8B%E6%B1%A0.html">Executor线程池</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Feb 23, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/%E5%89%8D%E7%AB%AF/2017/02/23/Spring%E4%BD%BF%E7%94%A8PDF%E6%A8%A1%E6%9D%BF%E7%94%9F%E6%88%90PDF%E6%96%87%E4%BB%B6.html">java使用PDF模板生成PDF文件</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Feb 15, 2017</span>

        <h2>
          <a class="post-link" href="/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E6%BA%90%E6%8A%80%E6%9C%AF/2017/02/15/%E4%BD%BF%E7%94%A8AOP%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F.html">使用AOP开发管理日志系统</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Feb 13, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2017/02/13/Spring-Data-Jpa%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B.html">Spring-Data-Jpa 查询存储过程</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Feb 8, 2017</span>

        <h2>
          <a class="post-link" href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/2017/02/08/%E9%80%92%E5%BD%92%E5%92%8C%E5%88%86%E6%B2%BB-%E6%B1%89%E8%AF%BA%E5%A1%94%E9%97%AE%E9%A2%98.html">算法-汉诺（Hanoi）塔问题</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Feb 6, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%A4%A7%E6%95%B0%E6%8D%AE/2017/02/06/Hadoop%E6%A0%B8%E5%BF%83-MapReduce%E7%AE%80%E4%BB%8B.html">Hadoop核心-MapReduce简介</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Feb 6, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%A4%A7%E6%95%B0%E6%8D%AE/2017/02/06/Hadoop%E6%A0%B8%E5%BF%83-HDFS%E7%AE%80%E4%BB%8B.html">Hadoop核心-HDFS简介</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Feb 6, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%A4%A7%E6%95%B0%E6%8D%AE/2017/02/06/Hadoop%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE.html">Hadoop安装与配置</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Jan 3, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2017/01/03/JPA%E4%BD%BF%E7%94%A8%E8%81%94%E5%90%88%E4%B8%BB%E9%94%AE.html">JPA使用联合主键</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Jan 3, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%89%8D%E7%AB%AF/2017/01/03/Bootstrap-Tab%E6%A0%87%E7%AD%BE%E9%A1%B5.html">Bootstrap-Tab 标签页</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Jan 3, 2017</span>

        <h2>
          <a class="post-link" href="/%E5%89%8D%E7%AB%AF/2017/01/03/Bootstrap-table%E5%AF%BC%E5%87%BAExcel.html">Bootstrap-Table 导出Excel</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Dec 23, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%89%8D%E7%AB%AF/2016/12/23/Bootstrap-table%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2.html">Bootstrap-Table 分页查询</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Dec 21, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2016/12/21/SQL_Error_911_SQLState_42000.html">Hibernate执行SQL语句错误</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Dec 20, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2016/12/20/Spring-Data-Jpa%E6%9F%A5%E8%AF%A2%E8%A7%86%E5%9B%BE.html">Spring-Data-Jpa 查询视图</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Dec 13, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%89%8D%E7%AB%AF/2016/12/13/Ajax%E8%AF%B7%E6%B1%82.html">Ajax-请求</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Dec 2, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2016/12/02/Maven-%E6%89%8B%E5%8A%A8%E6%B7%BB%E5%8A%A0Oracle%E9%A9%B1%E5%8A%A8.html">Maven-手动安装Oracle驱动</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Dec 2, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2016/12/02/Spring-%E5%AE%9E%E4%BD%93%E7%B1%BB%E6%B3%A8%E8%A7%A3.html">Spring-实体类注解</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Nov 19, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%90%8E%E7%AB%AF/2016/11/19/Spring-Boot-jsp.html">Spring-Boot+Jsp demo</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Nov 8, 2016</span>

        <h2>
          <a class="post-link" href="/%E5%B7%A5%E5%85%B7/2016/11/08/VPN-Lantern.html">VPN Lantern</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Nov 8, 2016</span>

        <h2>
          <a class="post-link" href="/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E6%BA%90%E6%8A%80%E6%9C%AF/2016/11/08/Git-Introduction.html">Git Introduction</a>
        </h2>
      </li>
    
      <li>
        <span class="post-meta">Nov 8, 2016</span>

        <h2>
          <a class="post-link" href="/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%BC%80%E6%BA%90%E6%8A%80%E6%9C%AF/2016/11/08/Git-command.html">Git Command</a>
        </h2>
      </li>
    
  </ul>
-->

<!-- This loops through the paginated posts -->

  <h1><a href="/liunx/2017/06/16/linux-shell.html">linux</a></h1>
  <p class="author">
    <span class="date">2017-06-16 00:00:00 +0800</span>
  </p>
<!--
  <div class="content">
    <ul id="markdown-toc">
  <li><a href="#c语言基础" id="markdown-toc-c语言基础">c语言基础</a></li>
  <li><a href="#liunx-shell" id="markdown-toc-liunx-shell">liunx shell</a></li>
</ul>
<h3 id="c语言基础">c语言基础</h3>
<ul>
  <li><a href="https://github.com/drsin/linuxCoreLearn/tree/master/c/dataType">数据类型</a></li>
  <li><a href="https://github.com/drsin/linuxCoreLearn/tree/master/c/PrintSacnf">输入输出</a></li>
  <li><a href="https://github.com/drsin/linuxCoreLearn/tree/master/c/baePractice">基础练习</a></li>
  <li><a href="https://github.com/drsin/linuxCoreLearn/tree/master/c/sysCall">系统调用</a>
    <h3 id="liunx-shell">liunx shell</h3>
  </li>
  <li>kernel的版本
    <div class="highlighter-rouge"><pre class="highlight"><code>uname -a 可以查看linux内核版本
X-window 下创建的终端是虚拟终端
</code></pre>
    </div>
  </li>
  <li>配置网络
    <div class="highlighter-rouge"><pre class="highlight"><code>vim /etc/sysconf/network-script/ifcfg-eth0
如果想使用图形化界面setup
</code></pre>
    </div>
  </li>
  <li>man linux中的帮助手册</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>分为8章： 		
第1章 Linux系统命令的帮助 	
第2章 Linux系统API的帮助手册		 		
第3章 C库函数的帮助 		
第5章系统配置文件的帮助 		
第7章 某一主题的帮助 		
第8章 系统管理的命令 
命令组成 cmd [option [argument]]
</code></pre>
</div>

<ul>
  <li>pwd命令，查看当前路径</li>
  <li>ls 查看目录下的文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>单敲一个ls，只显示当前目录下的文件 	默认不显示隐藏文件，想显示用-a选项 	
-d显示目录本身的信息 	多个选项可以合并着写 -ld
一个目录创建后，会自动创建两个目录，
.  代表本目录 	.. 代表上级目录 	最顶层的..就是自身
</code></pre>
</div>

<ul>
  <li>mv 文件的移动或改名</li>
  <li>cp source dest 把source拷贝到dest</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>-r 拷贝目录
</code></pre>
</div>

<ul>
  <li>touch 创建文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>更新文件最后修改时间
</code></pre>
</div>

<ul>
  <li>cd改变当前目录到制定的目录</li>
  <li>mkdir 创建目录</li>
  <li>rmdir 只能删除空目录</li>
  <li>
    <p>rm -rf 删除非空目录</p>
  </li>
  <li>cat 显示文件的内容</li>
  <li>more 分屏显示文件内容,空格显示下一屏，b上一屏</li>
  <li>alias 起别名
    <div class="highlighter-rouge"><pre class="highlight"><code>linux有个习惯：在终端设置的信息只在本终端有效，离开终端就无效,如果想让设置永久生效，得修改配置文件,但是不立即生效，下一次用就生效了
</code></pre>
    </div>
  </li>
  <li>useradd 用户名 添加新用户</li>
  <li>passwd 修改用户密码</li>
  <li>
    <p>userdel -r 删除用户</p>
  </li>
  <li>hostname</li>
  <li>id显示用户信息</li>
  <li>whoami</li>
  <li>
    <p>date 显示时间</p>
  </li>
  <li>shutdow -h now 发送广播信息</li>
  <li>init 0   关闭系统的所有服务</li>
  <li>halt -p  关闭电源</li>
  <li>shutdown -r now</li>
  <li>init 6</li>
  <li>
    <p>reboot</p>
  </li>
  <li>创建一个用户</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>在/home/创建一个目录,并且添加一些隐藏文件,这些隐藏文件来自/etc/skel/.*  
chown -R xiaoyan.xiaoyan  .
在/etc/passwd文件中添加一行记录
在/etc/shadow文件中添加一条记录
在/etc/group中添加一条组的信息
在/etc/gshadow文件中添加一条记录
</code></pre>
</div>

<ul>
  <li>groupadd</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>将一个用户加入到一个组，在group文件中对应的组后面添加上用户名，如果添加多个用户用逗号分割，
 管理员的组id等于0，其他用户加入到这组也不是管理员
</code></pre>
</div>

<ul>
  <li>-rw-r–r–. 1 root    root     1045 7月  15 14:13 day02.txt</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>第一列 文件的类型
普通文件
d 目录文件
l 软链接文件
p 管道文件
b 块设备文件
c 字符设备文件
s socket文件	
  own        grp       othr
  r w -     r - -     r - -
  | | |
  | | |
  | | \_执行
  | \___写
  \_____读
</code></pre>
</div>

<ul>
  <li>chmod 修改文件的权限</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code> chmod 谁-/+/=权限  文件
		  o       r
          g       w
          u       x
          a
	+ 在原有的权限基础上添加新的权限
	- 在原有的权限基础上取消对应的权限
	= 取消原有权限设置为新的权限

	t 粘帖位
	s 用户设置位
	
</code></pre>
</div>
<div class="highlighter-rouge"><pre class="highlight"><code>程序在执行过程中存在两个用户:实际用户,有效用户

- 硬链接数
	硬链接文件不能跨分区
</code></pre>
</div>

<ul>
  <li>which 查找命令在哪里</li>
  <li>
    <p>whereis 查找命令在哪里，比which多了关于帮助的位置</p>
  </li>
  <li>find 找文件</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>	-name
	-type
	-user
	-group
	-mtime
		+n 更新时间距离现在n天前
		-n 更改时间距离现在n天内
	多个查找条件可以用 -a -o
- grep 查找文件中的内容
	如果要递归查找子目录 -r
</code></pre>
</div>

<ul>
  <li>tar 打包</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>	tar -cvf 打包
	gzip 压缩成 tar.gz
	bzip2 压缩程 tar.bz2

	tar -jcvf tar.bz2
	tar -zcvf tar.gz
</code></pre>
</div>

<ul>
  <li>head 显示文件的开始若干行,默认10行</li>
  <li>
    <p>tail 显示文件末尾的若干行</p>
  </li>
  <li>cut 显示文件某些列 -d列的分割符号 -f要显示的列</li>
  <li>
    <p>sort -t -k -n</p>
  </li>
  <li>
    <p>uniq 过滤相邻的重复行</p>
  </li>
  <li>
    <p>wc 用于统计行数，单词数，字符数
   -l
   -c
   -w</p>
  </li>
  <li>sed 流式编辑器</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code> 逐行读取文件中的内容存储到临时缓存，接着用sed命令处理缓存中的内容，处理完成以后，把缓存中的内容送到屏幕，接着处理下一行，直到文件末尾，对源文件的内容没有改变。
 -n 不打印 	
用法 sed [选项] 命令 文件 
	sed '4,$d' day03.txt 	从第4行到最后一行删除 
	sed '3q' day03.txt 		处理完第三行时退出 	
	sed 's/3/三/' note.txt 		将每行的第一个3替换成三
	sed 's/3/三/g' note.txt 		将所有的3替换成三
</code></pre>
</div>

<ul>
  <li>awk 处理数据和生成报告的编程语言</li>
</ul>

<div class="highlighter-rouge"><pre class="highlight"><code>awk比sed多了列处理功能

awk [option] awk_script files
	-F 指定输入记录分段的分割符
	-f 从指定的awk脚本读

awk -F: '{print $1}' /etc/passwd

		awk -F: 'BEGIN{}
		/pattern/{}
		END{}'  /etc/passwd

正则表达式
	\&lt;\&gt;匹配单词
	.* 任意多个任意字符
	.  任意单个字符
	^  行首
	
输入输出重定向
ls 从磁盘读，向屏幕写
cat 从文件读，向屏幕写

输入：数据来源
输出：数据去向
我们将有输入输出的命令叫过滤器

标准的输入 0 stdin
标准的输出 1 stdout
标准的错误 2 stderr

改变输入输出方向叫重定向
</code></pre>
</div>

<ul>
  <li>进程优先级 nice</li>
</ul>

<p>前后台进程</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&amp;  把进程放入后台
jobs 查看后台有哪些进程
fg %i 把i号进程从后台搬到前台
ctrl+z 把前台进程拿到后台
bf %i 将后台i号进程运行起来

如果想在离开shell终端时，后台进程继续运行
nohup
</code></pre>
</div>


  </div>
-->

  <h1><a href="/c%E8%AF%AD%E8%A8%80/2017/06/16/C%E8%AF%AD%E8%A8%80%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8.html">C语言系统调用</a></h1>
  <p class="author">
    <span class="date">2017-06-16 00:00:00 +0800</span>
  </p>
<!--
  <div class="content">
    
<p><strong>fgets</strong>
头文件：include<stdio.h></stdio.h></p>

<p>定义函数：har * fgets(char * s, int size, FILE * stream);</p>

<p>函数说明：fgets()用来从参数stream 所指的文件内读入字符并存到参数s 所指的内存空间, 直到出现换行字符、读到文件尾或是已读了size-1 个字符为止, 最后会加上NULL 作为字符串结束.</p>

<p>返回值：gets()若成功则返回s 指针, 返回NULL 则表示有错误发生.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main( void )
{
	char buf[1024] = {};
	
	//gets(buf);//丢弃\n
	fgets(buf, 1024, stdin);//不丢弃\n
	int n = strlen(buf);
	//printf("len=%d,buf=%s\n", n, buf);
	buf[n-1] = 0;
	puts(buf);//自动加\n
	//fputs(buf, stdout);
}
</code></pre>
</div>
<p><strong>open</strong>
头文件：#include <stdio.h></stdio.h></p>

<p>fopen()是一个常用的函数，用来以指定的方式打开文件，其原型为：
    FILE * fopen(const char * path, const char * mode);</p>

<p>【参数】path为包含了路径的文件名，mode为文件打开方式。</p>

<p>mode有以下几种方式：
打开方式	说明</p>

<blockquote>
  <p>r	以只读方式打开文件，该文件必须存在。
-r+	以读/写方式打开文件，该文件必须存在。 rb+	以读/写方式打开一个二进制文件，只允许读/写数据。 rt+	以读/写方式打开一个文本文件，允许读和写。 w	打开只写文件，若文件存在则长度清为0，即该文件内容消失，若不存在则创建该文件。
w+	打开可读/写文件，若文件存在则文件长度清为零，即该文件内容会消失。若文件不存在则建立该文件。
a	以附加的方式打开只写文件。若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾，即文件原先的内容会被保留（EOF符保留)。
a+	以附加方式打开可读/写的文件。若文件不存在，则会建立该文件，如果文件存在，则写入的数据会被加到文件尾后，即文件原先的内容会被保留（原来的EOF符
不保留)。 wb	以只写方式打开或新建一个二进制文件，只允许写数据。 wb+	以读/写方式打开或建立一个二进制文件，允许读和写。
wt+	以读/写方式打开或建立一个文本文件，允许读写。 at+	以读/写方式打开一个文本文件，允许读或在文本末追加数据。
ab+	以读/写方式打开一个二进制文件，允许读或在文件末追加数据。 在POSIX 系统，包含Linux 下都会忽略 b
字符。由fopen()所建立的新文件会具有S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH(0666)权限，此文件权限也会参考umask
值。</p>
</blockquote>

<p>二进制和文本模式的区别：</p>

<blockquote>
  <p>在windows系统中，文本模式下，文件以”\r\n”代表换行。若以文本模式打开文件，并用fputs等函数写入换行符”\n”时，函数会自动在”\n”前面加上”\r”。即实际写入文件的是”\r\n”
。 在类Unix/Linux系统中文本模式下，文件以”\n”代表换行。所以Linux系统中在文本模式和二进制模式下并无区别</p>
</blockquote>

<p>【返回值】文件顺利打开后，指向该流的文件指针就会被返回。若果文件打开失败则返回NULL，并把错误代码存在errno 中。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main( void )
{
	FILE *fp = fopen("hehe.txt", "w");
	if ( fp == NULL )
		exit(EXIT_FAILURE);

	fprintf(fp, "how are your!");
	
	fclose(fp);
	
	return 0;
}
</code></pre>
</div>
<p><strong>malloc()</strong> 
头文件：#include <stdlib.h></stdlib.h></p>

<p>malloc() 函数用来动态地分配内存空间（如果你不了解动态内存分配，请查看：C语言动态内存分配及变量存储类别），其原型为：
void* malloc (size_t size);</p>

<p>【参数说明】size 为需要分配的内存空间的大小，以字节（Byte）计。</p>

<p>【函数说明】malloc() 在堆区分配一块指定大小的内存空间，用来存放数据。这块内存空间在函数执行完成后不会被初始化，它们的值是未知的。如果希望在分配内存的同时进行初始化，请使用 calloc() 函数。</p>

<p>【返回值】分配成功返回指向该内存的地址，失败则返回 NULL。</p>

<p>由于申请内存空间时可能有也可能没有，所以需要自行判断是否申请成功，再进行后续操作。</p>

<p>如果 size 的值为 0，那么返回值会因标准库实现的不同而不同，可能是 NULL，也可能不是，但返回的指针不应该再次被引用。</p>

<p>注意：函数的返回值类型是 void *，void 并不是说没有返回值或者返回空指针，而是返回的指针类型未知。所以在使用 malloc() 时通常需要进行强制类型转换，将 void 指针转换成我们希望的类型，例如：
纯文本复制
char *ptr = (char *)malloc(10);  // 分配10个字节的内存空间，用来存放字符
头文件：#include <string.h>
**memset**
memset() 函数用来将指定内存的前n个字节设置为特定的值，其原型为：
    void * memset( void * ptr, int value, size_t num );</string.h></p>

<p>参数说明：
ptr 为要操作的内存的指针。
value 为要设置的值。你既可以向 value 传递 int 类型的值，也可以传递 char 类型的值，int 和 char 可以根据 ASCII 码相互转换。
num 为 ptr 的前 num 个字节，size_t 就是unsigned int。</p>

<p>【函数说明】memset() 会将 ptr 所指的内存区域的前 num 个字节的值都设置为 value，然后返回指向 ptr 的指针。</p>

<p>memset() 可以将一段内存空间全部设置为特定的值，所以经常用来初始化字符数组。例如：
char str[20];
memset(str, ‘\0’, sizeof(str)-1);</p>

<p>【返回值】返回指向 ptr 的指针。</p>

<p>注意：参数 value 虽声明为 int，但必须是 unsigned char，所以范围在0 到255 之间。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

typedef struct student {
	int id;
	char name[20];
	struct student *next;
} stu_t;

void input(stu_t **ph) {
	stu_t *p = *ph;
	stu_t *t=(stu_t*)malloc(sizeof(stu_t));
	assert(t);
	memset(t, 0x00, sizeof(stu_t));
	printf("input name: ");
	scanf("%s", t-&gt;name);
	printf("input id: ");
	scanf("%d", &amp;t-&gt;id);
	
	if ( p == NULL ) {
		*ph = t;
	} else {	
		while ( p-&gt;next != NULL )
			p = p-&gt;next;
		p-&gt;next = t;
	}
}

void front(stu_t **ph)
{
	stu_t *p = malloc(sizeof(stu_t));
	assert(p);
	
	memset(p, 0x00, sizeof(stu_t));
	printf("input name: ");
	scanf("%s", p-&gt;name);
	printf("input id: ");
	scanf("%d", &amp;p-&gt;id);
	
	p-&gt;next = *ph;
	*ph = p;
}

void output(stu_t *h)
{
	while ( h != NULL ) {
		printf("%d %s\n", h-&gt;id, h-&gt;name);
		h = h-&gt;next;
	}
}

int main( void )
{
	char c;
	stu_t *head = NULL;
	while ( 1 ) {
		printf("I input other exit\n");
		scanf(" %c", &amp;c);
		if ( c!='i' &amp;&amp; c!='I')
			break;
		//input(&amp;head);
		front(&amp;head);
	}
	output(head);
}
</code></pre>
</div>
<p><strong>sscanf</strong>
头文件：#include <stdio.h></stdio.h></p>

<p>sscanf()函数用于从字符串中读取指定格式的数据，其原型如下：
    int sscanf (char *str, char * format [, argument, …]);</p>

<p>【参数】参数str为要读取数据的字符串；format为用户指定的格式；argument为变量，用来保存读取到的数据。</p>

<p>【返回值】成功则返回参数数目，失败则返回-1，错误原因存于errno 中。</p>

<p>sscanf()会将参数str 的字符串根据参数format（格式化字符串）来转换并格式化数据（格式化字符串请参考scanf()）， 转换后的结果存于对应的变量中。</p>

<p>sscanf()与scanf()类似，都是用于输入的，只是scanf()以键盘(stdin)为输入源，sscanf()以固定字符串为输入源
<strong>fprintf</strong>
头文件：#include <stdio.h></stdio.h></p>

<p>定义函数：int fprintf(FILE * stream, const char * format, …);</p>

<p>函数说明：fprintf()会根据参数format 字符串来转换并格式化数据, 然后将结果输出到参数stream 指定的文件中, 直到出现字符串结束(‘\0’)为止。</p>

<p>返回值：关于参数format 字符串的格式请参考printf(). 成功则返回实际输出的字符数, 失败则返回-1, 错误原因存于errno 中.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int main( void )
{
	char buf[] = "lilei 123|45.3";
	int i;
	double d;
	char name[10] = {};
	
	sscanf(buf, "%s%d|%lf", name, &amp;i, &amp;d);
	fprintf(stdout, "name=%s,i=%d,d=%f\n", name, i, d);
}
</code></pre>
</div>
<p><strong>sprintf</strong>
头文件：#include <stdio.h></stdio.h></p>

<p>sprintf()函数用于将格式化的数据写入字符串，其原型为：
    int sprintf(char *str, char * format [, argument, …]);</p>

<p>【参数】str为要写入的字符串；format为格式化字符串，与printf()函数相同；argument为变量。</p>

<p>除了前两个参数类型固定外，后面可以接任意多个参数。而它的精华，显然就在第二个参数–格式化字符串–上。 printf()和sprintf()都使用格式化字符串来指定串的格式，在格式串内部使用一些以“%”开头的格式说明符（format specifications）来占据一个位置，在后边的变参列表中提供相应的变量，最终函数就会用相应位置的变量来替代那个说明符，产生一个调用者想要的字符串。</p>

<p>sprintf()最常见的应用之一莫过于把整数打印到字符串中，如：
    sprintf(s, “%d”, 123);  //把整数123打印成一个字符串保存在s中
    sprintf(s, “%8x”, 4567);  //小写16进制，宽度占8个位置，右对齐</p>

<p>sprintf的作用是将一个格式化的字符串输出到一个目的字符串中，而printf是将一个格式化的字符串输出到屏幕。sprintf的第一个参数应该是目的字符串，如果不指定这个参数，执行过程中出现 “该程序产生非法操作,即将被关闭….”的提示。</p>

<p>sprintf()会根据参数format 字符串来转换并格式化数据，然后将结果复制到参数str 所指的字符串数组，直到出现字符串结束(‘\0’)为止。关于参数format 字符串的格式请参考printf()。</p>

<p>【返回值】成功则返回参数str 字符串长度，失败则返回-1，错误原因存于errno 中</p>
<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int main( void )
{
	int i = 123;
	double d = 99.99;
	char *name = "furong";
	char buf[1024] = {};
	
	sprintf(buf, "name=%s|i=%d|d=%f|", name, i, d);
	sprintf(buf, "%d", 123);
	printf("buf=%s\n", buf);
}
</code></pre>
</div>
<p>##特殊输入</p>
<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int main( void )
{
	int x, y;
	
/*
	scanf("%2d%2d", &amp;x, &amp;y);
	printf("x=%d,y=%d\n", x, y);
	scanf("%*d%d", &amp;x);
	printf("x=%d\n", x);
*/
	
	char c;
	char str[100];
	scanf("%[^\n]", str); //读取[]里面有的字符
	scanf("%*c%c", &amp;c);
	scanf("%*[^\n]"); scanf("%*c");
	printf("str=%s\n", str);
	printf("c=[%c]\n", c);
}
</code></pre>
</div>

  </div>
-->

  <h1><a href="/c%E8%AF%AD%E8%A8%80/2017/06/16/C%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html">C语言数据类型</a></h1>
  <p class="author">
    <span class="date">2017-06-16 00:00:00 +0800</span>
  </p>
<!--
  <div class="content">
    
<hr />
<p><strong>整数在计算机内部的表示形式是二进制</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code> 1  0  0  1
1X2^3 + 0X2^2 + 0X2^1 + 1X2^0	
</code></pre>
</div>
<p><strong>最高位是符号位 0正 1负</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code>-1+1 本该等于0 但是按照相加原理得到值为-2
  1000 0001    -1
+ 0000 0001     1
  ---------------
  1000 0010    -2
</code></pre>
</div>
<p><strong>计算机为了处理这种情况设计了源码，补码和反码</strong>
<strong>机器数的补码可由原码得到。如果机器数是正数，则该机器数的补码与原码一样,如果机器数是负数，则该机器数的补码是对它的原码（除符号位外）各位取反，并在未位加1而得到的；</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code>1111 1111   -1[补]
0000 0001    1[原]
------------
0000 0000    0

1000 0101 -5
1000 0111 -7

1111 1011   -5[补]
1111 1001   -7[补]
------------------
1111 0100   
1000 1100  -12 
</code></pre>
</div>
<p><strong>unsigned int</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>0000 0000-1111 1111  [ 0-255 ]
</code></pre>
</div>

<p><strong>int</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>1111 1111 -  0111 1111         [-128 - 127 ]
</code></pre>
</div>
<p><strong>字符 每个字符都有一个编码叫ASCII编码</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>'a'-'z'   97-122
'A'-'Z'   65-90
'0'-'9'   48-57
'\r'  13
'\n'  10
'\t'   9
'\0'   0
	' '   32
</code></pre>
</div>

<p><strong>用字符用的是编码，不是图案，所以可以当整数用</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>从字符到整数的转换 '6'-'0'
				 6 +'0'
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>gb2312
char
int 4B  -2G - 2G-1
short 2B -32768 +32767  0  65535

unsigned short int
unsigned int
unsigned char
unsigned long int

[signed] int
[signed] short [int]

long long  8字节 

char &lt;= short &lt;= int &lt;= long
float  
1   
</code></pre>
</div>
<p><strong>小数溢出 无穷 INF</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>3.5 double 
3.5F float
3.5L long double

35 int
35L long int
</code></pre>
</div>

<p><strong>没有真假类型 C语言用数值表示真假，非0就是真，0就是假</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>10 '\0' '0' 0

0.0001

char 
short 

int 
long 

float 
double 

printf("12%dhehe", 3);
%i
%d
%hd
%hhd
%c
%u
%ld
%#x %#X
%#o

%f
%lf
%g
%e

%s
%p

int age price float;

int iAge;
float fPrice;
double dIncome;

int my_name;
</code></pre>
</div>


  </div>
-->

  <h1><a href="/c%E8%AF%AD%E8%A8%80/2017/06/16/C%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0.html">C语言基础练习</a></h1>
  <p class="author">
    <span class="date">2017-06-16 00:00:00 +0800</span>
  </p>
<!--
  <div class="content">
    
<p><strong>汉诺塔</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

void move(char x, char y)
{
	static int cnt = 0;
	printf("%d %c =&gt; %c\n", ++cnt, x, y);
}

void hanno(int n, char a, char b, char c)
{
	if ( n == 1 )
		move(a, c);
	else {
		hanno(n-1, a, c, b);
		move(a, c);
		hanno(n-1, b, a, c);
	}
}

int main( void )
{
	hanno(3, 'A', 'B', 'C');
	return 0;
}
</code></pre>
</div>

<p><strong>百鸡百钱</strong>
鸡翁一值钱五——公鸡五文一只，而百钱买百鸡（100文钱买鸡），所以公鸡数量要至少小于20</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int main( void )
{
	int x;
	int y;
	int z;

	for (x=0; x&lt;=100; x++)
	{
		for (y=0; y&lt;=100; y++)
		{
			z = 100-x-y;
			if (z%3==0 &amp;&amp; 5*x+3*y+z/3==100)
			{
				printf("公鸡%d,母鸡%d,小鸡%d\n",
					x, y, z);
			}
		}
	}

	return 0;
}
</code></pre>
</div>
<p><strong>常胜将军</strong>
现有21根火柴，两人轮流取，每人每次可以取走1至4根，不可多取，也不能不取，谁取最后一楰火柴谁输。请编写一个程序进行人机对弈，要求人先取，计算机后取；计算机一方为“常胜将军”</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int main( void )
{
	int last = 21;
	int user;
	int computer;

	for ( ; ; ) {
		printf("还剩%d根火柴!\n", last);
		printf("用户取几根? ");
		scanf("%d", &amp;user);
		if ( user&lt;1 || user&gt;4 || user&gt;last)
			continue;
		printf("你取了%d根火柴!\n", user);
		last -= user;
		if ( last == 0) {
		  printf("你取走了最后一支火柴,你失败!\n");
		  break;
		}
	
		computer = 5 - user;
		printf("计算机取了%d根火柴!\n", computer);
		last -= computer;
	}

	return 0;
}
</code></pre>
</div>

<p><strong>约瑟夫环</strong></p>

<p>已知n个人（以编号1，2，3…n分别表示）围坐在一张圆桌周围。从编号为k的人开始报数，数到m的那个人出列；他的下一个人又从1开始报数，数到m的那个人又出列；依此规律重复下去，直到圆桌周围的人全部出列</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#include&lt;stdio.h&gt;
int main( void ) {
	int i = -1;
	int j = 0;
	int kill = 0; //跳海的人数，用于控制循环结束
	int a[8] = {1,2,3,4,5,6,7,8};
	
	while ( kill &lt; 8 ) {
	
		//for用于找到第三个离开的人
		for (j=0; j&lt;=2; ) {
			i = (i+1)%8; //让i在0-7之间找下一个
			if (a[i] != -1 )
				j++;
		}

		printf("%d ", a[i]);
		a[i] = -1; //离开后位置用-1表示
		kill ++; //跳海人数+1
	}
	printf("\n");
	
	return 0;
}
</code></pre>
</div>
<p><strong>最大公约数</strong></p>
<div class="highlighter-rouge"><pre class="highlight"><code>#include &lt;stdio.h&gt;

int main( void )
{
	int m;
	int n;
	int r;

	printf("求最大公约数!\n");
	printf("请输入两个数:");
	scanf("%d%d", &amp;m, &amp;n);

	r = m%n;
	while ( r != 0 )
	{
		m = n;
		n = r;
		r = m%n;
	}

	printf("最大公约数是%d\n", n);

	return 0;
}
</code></pre>
</div>


  </div>
-->

  <h1><a href="/%E6%94%AF%E4%BB%98%E4%B8%9A%E5%8A%A1/2017/06/08/%E9%93%B6%E8%81%94%E5%89%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F.html">银联前置系统</a></h1>
  <p class="author">
    <span class="date">2017-06-08 00:00:00 +0800</span>
  </p>
<!--
  <div class="content">
    <ul id="markdown-toc">
  <li><a href="#系统概述" id="markdown-toc-系统概述">系统概述:</a></li>
  <li><a href="#系统架构" id="markdown-toc-系统架构">系统架构</a></li>
</ul>

<h2 id="系统概述">系统概述:</h2>
<blockquote>
  <p><strong>银行卡前置系统</strong>(TOPFe)是针对中国银联接口规范2.0而整合的银行卡交易处理系统，整个系统分为5个子系统：银联前置系统（NCUP）、ATM前置系统（ATMP）、POS前置系统（POSP）、加密处理系统（HSM）、批处理系统（BATCH）。
介于中国银联处理系统和银行帐务主机处理系统之间的一个交易处理系统，它完成跨行交易（包括本代他，他代本）的处理和转接的功能。若与其他两个子系统（ATM前置系统、POSP前置系统）整合使用，银联前置系统还可以提供本行卡交易（本代本）处理模块。
ATM前置系统：ATM机具的接入，管理和监控ATM设备，转发ATM上进行的交易。
<strong>POS前置系统</strong>：POS机具的接入，管理POS设备信息，转发POS上进行的交易。
<strong>加密处理系统</strong>（HSM）：向外界提供统一的加密调用接口，支持DES软加密功能（OS：32位）；支持30所和56所加密机的接入功能。
<strong>批处理系统</strong>：提供最基本的操作函数（文件入库、数据提取、报表输出等）；提供系统数据备份功能。</p>
</blockquote>

<h2 id="系统架构">系统架构</h2>
<p><img src="./1496995188924.png" alt="Alt text" /></p>

<blockquote>
  <p>他带本交易流程：      请求：通讯模块-&gt;I.1-&gt;I.2-&gt;I.3-&gt;I.4-&gt;通讯模块
应答：通讯模块-&gt;O.1-&gt;O.2-&gt;O.3-&gt;O.4-&gt;通讯模块 本代他交易流程：
          请求：通讯模块-&gt;O.1-&gt;O.2-&gt;O.3-&gt;O.4-&gt;通讯模块
		  应答：通讯模块-&gt;I.1-&gt;I.2-&gt;I.3-&gt;I.4-&gt;通讯模块</p>
</blockquote>

<p>##系统模块</p>

<ul>
  <li>守护进程模块  Daemon</li>
  <li>桥接路由模块  Bridge</li>
  <li>通讯服务模块
    <blockquote>
      <p>Commcup1  （南京银联通讯进程）
Commcup2  （总行银联通讯进程）
Commcup3 （杭州银联通讯进程）
Commcup4  （成都银联通讯进程）
CommDeb  （信用卡模块通讯进程）
CoEsbCli    （核心通讯进程）
CommAtmp （ATMP通讯进程）
CommPosP  （POSP通讯进程）
CoEsbSrv    （中间业务平台通讯进程）
Commcon	  （控制台通讯进程）</p>
    </blockquote>
  </li>
  <li>加密机模块：  HSM         （加密模块）
    <blockquote>
      <p>加密模块与加密机的连接与一般通讯程序的方法类似，只不过所连的是加密机而不是中心而已。本加密程序支持软加密，硬加密TCP以及硬加密串口等多种加密方式。</p>
    </blockquote>
  </li>
</ul>

<p>###Brigdge模块</p>

<ul>
  <li>初始化（BrigdgeInit)
守护进程Daemon fork子进程并调用系统函数execvp()替换进程上下文启动桥接进程Bridge,其中传入的参数分别为服务ID和服务序列号。之后通过srvId从数据库加载服务的配置信息到内存中。
对应调用代码如下：
    <div class="highlighter-rouge"><pre class="highlight"><code>  nReturnCode = DbsSRVINF(DBS_SELECT, &amp;tTblSrvInf);
  nReturnCode = MsqInit (gsSrvId, gatSrvMsq);
  nReturnCode = CvtInit (gatConvType, gatUsageTransRule);
  nReturnCode = BufChgLoad(1,&amp;tBufChgRule);
  nReturnCode = IpcDftLoad(1,&amp;tIpcDftRule);
  nReturnCode = DbsRouteInfLoad (&amp;gnRouteInfNum, gatRouteInf);
  nReturnCode = DbsCardBinload (&amp;gnCardBinNum, gatCardBin);
</code></pre>
    </div>
    <p>其中加载服务和消息队列是调用嵌入式数据库开发语言*.pc</p>
  </li>
</ul>

<blockquote>
  <p>提供对于嵌入式SQL的支持，需要数据库厂商除了提供DBMS之外，还必须提供一些工具。为了实现对于嵌入式SQL的支持，技术上必须解决以下4个问题[1]：
宿主语言的编译器不可能识别和接受SQL文，需要解决如何将SQL的宿主语言源代码编译成可执行码。
宿主语言的应用程序如何与DBMS之间传递数据和消息。 如何把对数据的查询结果逐次赋值给宿主语言程序中的变量以供其处理。
数据库的数据类型与宿主语言的数据类型有时不完全对应或等价，如何解决必要的数据类型转换问题。
嵌入式工作原理
<img src="./1497002360274.png" alt="Alt text" /></p>
</blockquote>

<p>流程图</p>
<pre><code class="language-flow">st=&gt;start: 启动Bridge
conDB=&gt;operation: 连接数据库
loadSrv=&gt;operation: 服务属性
loadMsq=&gt;operation: 消息队列
loadConv=&gt;operation: 转换规则
loadIpc=&gt;operation: 内部结构体
loadRoute=&gt;operation: 路由
sub=&gt;subroutine: 加载配置信息
condb=&gt;condition: 连接成功
Suc1=&gt;condition: true
Suc2=&gt;condition: true
Suc3=&gt;condition: true
Suc4=&gt;condition: true
Suc5=&gt;condition: true
io=&gt;inputoutput: 加载配置信息
e=&gt;end: 结束

st-&gt;conDB-&gt;condb
condb(yes)-&gt;loadSrv-&gt;Suc1
Suc1(yes)-&gt;loadMsq-&gt;Suc2
Suc2(yes)-&gt;loadConv-&gt;Suc3
Suc3(yes)-&gt;loadIpc-&gt;Suc4
Suc4(yes)-&gt;loadRoute-&gt;e
Suc1(no)-&gt;e
Suc2(no)-&gt;e
Suc3(no)-&gt;e
Suc4(no)-&gt;e
condb(no)-&gt;conDB
</code></pre>
<ul>
  <li>格式转换规则是系统比较复杂的内容：
```flow
st=&gt;start: begin
loadConv=&gt;operation: load tbl_conv_type
condb=&gt;condition: true
i1=&gt;operation: j=0
i2=&gt;operation: j++
i3=&gt;operation: usage_key=-1
con1=&gt;condition: j&lt;14
forv1=&gt;operation: 判断是否为8583转换规则
forfld=&gt;operation: nMLoadFldInf
formsg=&gt;operation: nMLoadMsgInf
forconv=&gt;operation: nMLoadConInf
forbmp=&gt;operation: nMLoadBmpInf
foripc=&gt;operation: nMLoadIpcInf</li>
</ul>

<p>convInit=&gt;inputoutput: ConvInit(FldInfKey,MsgInfKey,ConInfKey,BmpInfKey,IpcInfKey)</p>

<p>ed=&gt;end: end
st-&gt;loadConv-&gt;condb
condb(yes,right)-&gt;i1-&gt;i3-&gt;con1
con1(yes,right)-&gt;i2(right)-&gt;i3
con1(no)-&gt;forv1-&gt;convInit
convInit-&gt;forfld-&gt;formsg-&gt;forconv-&gt;forbmp-&gt;foripc(left)-&gt;ed
condb(no)-&gt;ed
```
 报文转换我们转换可以把它比作为衣服加工厂，不同款式的衣服代表不同的交易类型，不同的衣服他们所需的衣服部件也不同有的需要衣领有的不需要衣领更好的比拟了不同交易所需的报文域不同。不同的尺寸也代表的了各域的的长度。对于工厂生产当然存在流水线，得确定下一个环节进行进一步加工。其实银联前置系统也是按此原理设计的。系统中涉及的三大对象就是报文域、交易报文、转换链路。对于通讯工具如消息队列，和socket共享内存，线程池、数据库连接池等都是系统的DAO层，没有上升到业务服务层。为了清晰了解转换过程我们先从交易报文说起，对于发至birdge桥接模块，他需要外部的报文转换为内部结构体IPC(此IPC并非是unix系统间通讯机制)而是针对报文所存在的属性设置的结构体，比如交易中设计的主账号，交易金额，发卡机构识别码，受理机构识别码等都是内部结构的字段。那如何提取报文到内部结构体呢。对于银联前置系统的设计是不同模块他们都有一样的内部结构体容易IPC,包括所有的域信息，转换中将不同的域赋值给IPC结构体的对应字段中。有值即给对应字段赋值，没有则赋值为空，系统中用标记指示位来识别(Y/N)。那如何区分不同的交易类型呢，系统内部设置了交易码，不同的交易码对应不同交易类型，通过关键域的值来匹配交易码，首先是F01交易类型、F03交易处理码的的前两位、F25服务条件码和F60.2.5终端类型来判断。确定了衣服的款式，接下来要确定它的尺寸。</p>
<ul>
  <li>加载域属性(nMLoadFldInf)
    <blockquote>
      <p>8583每个域包括可比拟为两个对象域值和域长度
比如F02主账号3136363232343234323030303030303231(ans)=&gt;
166224242000000021
前两位16代表域值长度后面的域值，相对于主账号为变长域，但是有些域为定长比如交易处理码为6位定长字符，那如何区分是定长的域还是不定长的域呢。其实这对我们交易报文中不知晓是否为定长报文域，对我们提取报文域值没有影响，只要知道域的长度按长取值就可以了。但是如何截取呢，没有对应的尺码该如何裁剪缝衣。考虑到此报文只涉及到的是交易类报文主要包括余额查询，取款，转账等。不同的交易他们所需的报文是各银行和银联约定俗成的。他们也用最小位图和最大位图来描述那些域是所需，那些不需要出现。位图
对于某些域中存在</p>

    </blockquote>
  </li>
</ul>


  </div>
-->


<div class="pagination">
  
    <span>&laquo; Prev</span>
  

  
    
      <em>1</em>
    
  
    
      <a href="/page2">2</a>
    
  
    
      <a href="/page3">3</a>
    
  
    
      <a href="/page4">4</a>
    
  
    
      <a href="/page5">5</a>
    
  
    
      <a href="/page6">6</a>
    
  
    
      <a href="/page7">7</a>
    
  

  
    <a href="/page2">Next &raquo;</a>
  
</div> 


</div>

   <footer class="site-footer">

  <div class="wrapper">


    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li><a href="mailto:86478582@qq.com">email:86478582@qq.com</a></li>
        </ul>
      </div>


      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/drsin"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">drsin</span></a>

          </li>
          
<!--
          
-->
        </ul>
      </div>
      <div class="footer-col footer-col-3">
        
          <span class="site-footer-owner"><a href="http://github.com/drsin/drsin.github.io">drsin.github.io</a> is maintained by <a href="http://github.com/drsin">drsin</a>.</span>
        
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
      </div>
    </div>

  </div>

</footer>


    </section>

    
  </body>
</html>
